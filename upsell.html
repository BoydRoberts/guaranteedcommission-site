<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upsells | GuaranteedCommission.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Header -->
  <header class="bg-white shadow">
    <div class="flex justify-between items-center max-w-7xl mx-auto px-4 py-4">
      <button onclick="openInvestorModal()" class="bg-red-600 text-white text-xs font-semibold px-3 py-1 rounded">
        Accredited Investors Only
      </button>
      <div class="text-center flex-1">
        <h1 class="text-3xl font-bold">GuaranteedCommission.com</h1>
        <p class="text-sm text-red-600 mt-1 px-2">
          Guaranteeing commissions so your home will sell quickly at a higher price.
        </p>
      </div>
      <button onclick="openPressModal()" class="bg-blue-600 text-white text-xs font-semibold px-3 py-1 rounded">
        Press Inquiry
      </button>
    </div>
  </header>

  <main class="max-w-2xl mx-auto bg-white p-6 rounded shadow mt-8">
    <h2 id="upsellTitle" class="text-xl font-bold mb-4">Upgrade Your Listing</h2>
    <p id="currentPlan" class="text-sm text-gray-600 mb-6"></p>

    <div id="upsellContent" class="space-y-6"></div>

    <div class="mt-8 flex justify-between">
      <button id="backBtn" class="px-4 py-2 rounded border">Back</button>
      <button id="nextBtn" class="px-6 py-2 rounded bg-green-600 text-white">Next</button>
    </div>
  </main>

  <script>
    const upsells = [
      {
        id: "upgradeToPlus",
        title: "Upgrade to Listed Property Plus ($20)",
        desc: "Upgrade Your Listing",
        planNote: "Current plan: Listed Property Basic â€“ FREE (Includes: printable commission communication letter, map search, listing price, main photo, address, parcel number, square footage, bedrooms, bathrooms, listing brokerage, listing agent, listing agent phone.  Does not include full property description.)"
      },
      {
        id: "banner",
        title: "Add Banner ($10)",
        desc: "Upgrade Your Listing",
        planNote: ""
      },
      {
        id: "premium",
        title: "Add Premium Placement ($10)",
        desc: "Upgrade Your Listing",
        planNote: ""
      },
      {
        id: "pin",
        title: "Add Pin Placement ($50)",
        desc: "Upgrade Your Listing",
        planNote: ""
      }
    ];

    let step = 0;
    const data = JSON.parse(localStorage.getItem("checkoutData") || "{}");

    function renderStep() {
      const u = upsells[step];
      if (!u) {
        window.location.href = "/checkout.html";
        return;
      }
      document.getElementById("upsellTitle").textContent = u.desc;
      document.getElementById("currentPlan").textContent = u.planNote || "";

      document.getElementById("upsellContent").innerHTML = `
        <h3 class="text-lg font-semibold mb-2">${u.title}</h3>
        <p class="text-sm text-gray-600">${u.desc}</p>
        <label class="flex items-center mt-4">
          <input type="checkbox" id="upsellChk" class="mr-2" ${data.upgrades?.[u.id] ? "checked" : ""}/>
          <span>Select this upgrade</span>
        </label>
      `;
    }

    document.getElementById("backBtn").addEventListener("click", ()=>{
      if (step > 0) step--;
      renderStep();
    });
    document.getElementById("nextBtn").addEventListener("click", ()=>{
      const u = upsells[step];
      const chk = document.getElementById("upsellChk").checked;
      data.upgrades = data.upgrades || {};
      data.upgrades[u.id] = chk;
      localStorage.setItem("checkoutData", JSON.stringify(data));
      step++;
      renderStep();
    });

    renderStep();
  </script>
</body>
</html>
