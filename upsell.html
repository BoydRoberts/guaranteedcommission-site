<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upgrade Options | GuaranteedCommission.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-xl mx-auto mt-10 bg-white p-6 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-6">Upgrade Your Listing</h1>

    <h2 id="upsellTitle" class="text-lg font-semibold mb-4"></h2>
    <p id="upsellDescription" class="text-sm text-gray-700 mb-6"></p>

    <div class="flex justify-center gap-4">
      <button onclick="acceptUpsell()" class="bg-green-600 text-white px-6 py-2 rounded">Yes</button>
      <button onclick="skipUpsell()" class="bg-gray-400 text-white px-6 py-2 rounded">Skip</button>
    </div>
  </div>

  <script>
    const selectedPlan = localStorage.getItem("selectedPlan") || "";
    const upsells = [];

    // Build upsell sequence based on plan
    if (selectedPlan === "Listed Property Basic") {
      upsells.push({
        id: "upgradeToPlus",
        title: "Upgrade to Listed Property Plus ($20)",
        desc: "Display full property description and 20 photos until your home is sold.",
        storageKey: "upgradeToPlus"
      });
    }

    if (selectedPlan === "Listed Property Basic" || selectedPlan === "Listed Property Plus") {
      upsells.push(
        {
          id: "banner",
          title: "Add Banner ($10)",
          desc: "Add a 30-character banner to highlight features like 'Open Sunday' or 'Ocean View'.",
          storageKey: "banner"
        },
        {
          id: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Appear above non-premium listings in your search area.",
          storageKey: "premium"
        },
        {
          id: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Pinned at the top of listings in your search area. Includes Premium Placement for free.",
          storageKey: "pin"
        }
      );
    }

    if (selectedPlan === "FSBO Plus") {
      upsells.push(
        {
          id: "confidential",
          title: "Confidential FSBO Upgrade ($100)",
          desc: "Keep your contact information private and avoid solicitation.",
          storageKey: "confidential"
        },
        {
          id: "banner",
          title: "Add Banner ($10)",
          desc: "Add a 30-character banner to highlight features like 'Open Sunday' or 'Ocean View'.",
          storageKey: "banner"
        },
        {
          id: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Appear above non-premium listings in your search area.",
          storageKey: "premium"
        },
        {
          id: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Pinned at the top of listings in your search area. Includes Premium Placement for free.",
          storageKey: "pin"
        }
      );
    }

    let currentIndex = 0;

    function showCurrentUpsell() {
      const upsell = upsells[currentIndex];
      if (!upsell) {
        // All upsells done â†’ go to checkout
        window.location.href = "/checkout.html";
        return;
      }
      document.getElementById("upsellTitle").textContent = upsell.title;
      document.getElementById("upsellDescription").textContent = upsell.desc;
    }

    function acceptUpsell() {
      const upsell = upsells[currentIndex];
      localStorage.setItem(upsell.storageKey, "true");

      // Special: if pin is selected, also set premium
      if (upsell.id === "pin") {
        localStorage.setItem("premium", "true");
      }

      currentIndex++;
      showCurrentUpsell();
    }

    function skipUpsell() {
      const upsell = upsells[currentIndex];

      // Special: if skipping pin, leave premium as-is
      if (upsell.id === "pin") {
        localStorage.setItem("pin", "false");
      }

      localStorage.setItem(upsell.storageKey, "false");

      currentIndex++;
      showCurrentUpsell();
    }

    window.addEventListener("DOMContentLoaded", showCurrentUpsell);
  </script>
</body>
</html>
