<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Choose Upgrades & Upsells | GuaranteedCommission.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card { background:#fff; border-radius:1rem; box-shadow:0 1px 6px rgba(0,0,0,.08); padding:1rem 1.25rem; }
    .muted { color:#6b7280; }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-3xl mx-auto p-4">
    <div class="text-center mb-3">
      <span class="inline-block text-[11px] px-2 py-1 rounded bg-gray-100 text-gray-600">upsell build 2025-08-14a</span>
    </div>

    <h1 class="text-2xl font-bold text-center">Pick Your Upgrades</h1>
    <p class="text-sm text-center muted mt-1">You will be able to review all upgrades and upsells at Review &amp; Checkout.</p>

    <div id="planRow" class="text-center text-xs muted mt-3"></div>

    <div class="grid gap-4 mt-6">
      <!-- UPGRADE TO PLUS (Basic only) -->
      <section id="card-upgrade" class="card hidden">
        <h2 class="text-lg font-semibold">Upgrade to Listed Property Plus ($20)</h2>
        <p class="text-sm muted mt-1">
          Add 20 photos and a full property description to your listing.
        </p>
        <div class="mt-3 flex items-center justify-between">
          <label class="flex items-center gap-2 text-sm">
            <input id="ck-upgrade" type="checkbox" class="h-4 w-4"/>
            <span>Select Upgrade</span>
          </label>
          <span class="font-semibold">$20</span>
        </div>
      </section>

      <!-- BANNER (all plans) -->
      <section id="card-banner" class="card">
        <h2 class="text-lg font-semibold">Add Banner ($10)</h2>
        <p class="text-sm muted mt-1">
          Add a 30-character banner. Highlight special features, open houses, or whatever you like – as often as you like – until your home is sold.
        </p>
        <div class="mt-3 flex items-center justify-between">
          <label class="flex items-center gap-2 text-sm">
            <input id="ck-banner" type="checkbox" class="h-4 w-4"/>
            <span>Select Banner</span>
          </label>
          <span class="font-semibold">$10</span>
        </div>
      </section>

      <!-- PREMIUM (all plans) -->
      <section id="card-premium" class="card">
        <h2 class="text-lg font-semibold">Add Premium Placement ($10)</h2>
        <p class="text-sm muted mt-1">
          Boost visibility so your listing is seen sooner by buyers and agents.
        </p>
        <!-- Removed Search area UI per request -->
        <div class="mt-3 flex items-center justify-between">
          <label class="flex items-center gap-2 text-sm">
            <input id="ck-premium" type="checkbox" class="h-4 w-4"/>
            <span>Select Premium Placement</span>
          </label>
          <span class="font-semibold">$10</span>
        </div>
      </section>

      <!-- PIN (all plans) -->
      <section id="card-pin" class="card">
        <h2 class="text-lg font-semibold">Add Pin Placement ($50)</h2>
        <p class="text-sm muted mt-1">
          Pin your listing to the top of results in key areas. Includes Premium Placement free.
        </p>
        <!-- Removed Search area UI per request -->
        <div class="mt-3 flex items-center justify-between">
          <label class="flex items-center gap-2 text-sm">
            <input id="ck-pin" type="checkbox" class="h-4 w-4"/>
            <span>Select Pin Placement</span>
          </label>
          <span class="font-semibold">$50</span>
        </div>
      </section>

      <!-- CONFIDENTIAL (FSBO only) -->
      <section id="card-confidential" class="card hidden">
        <h2 class="text-lg font-semibold">Confidential FSBO Upgrade ($100)</h2>
        <p class="text-sm muted mt-1">
          Keep your contact information private and avoid solicitation. GuaranteedCommission.com will not sell your information to third parties.
        </p>
        <div class="mt-3 flex items-center justify-between">
          <label class="flex items-center gap-2 text-sm">
            <input id="ck-confidential" type="checkbox" class="h-4 w-4"/>
            <span>Select Confidential Upgrade</span>
          </label>
          <span class="font-semibold">$100</span>
        </div>
      </section>
    </div>

    <div class="mt-6 flex items-center justify-between">
      <a href="/index.html" class="px-4 py-2 rounded border">Back</a>
      <a id="goCheckout" href="/checkout.html" class="px-5 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Review &amp; Checkout</a>
    </div>
  </div>

  <script>
    console.log('[upsell] build 2025-08-14a');

    const $ = s => document.querySelector(s);
    const getJSON = (k, fb) => { try { return JSON.parse(localStorage.getItem(k)) ?? fb; } catch { return fb; } };
    const setJSON = (k, v) => localStorage.setItem(k, JSON.stringify(v));

    const plan = (localStorage.getItem('selectedPlan') || 'Listed Property Basic').trim();
    $('#planRow').textContent = 'Current plan: ' + plan;

    // Show/hide cards by plan
    if (plan === 'Listed Property Basic') $('#card-upgrade').classList.remove('hidden');
    if (plan.includes('FSBO')) $('#card-confidential').classList.remove('hidden');

    // Load existing checkoutData
    let data = getJSON('checkoutData', {
      plan,
      base: plan === 'FSBO Plus' ? 100 : (plan === 'Listed Property Plus' ? 20 : 0),
      upgrades: { upgradeToPlus:false, banner:false, premium:false, pin:false, confidential:false },
      prices:  { plus:20, banner:10, premium:10, pin:50, fsbo:100, confidential:100 },
      meta: {},
      total: 0
    });

    // Pre-check from data
    $('#ck-upgrade') && ($('#ck-upgrade').checked = !!data.upgrades.upgradeToPlus);
    $('#ck-banner').checked  = !!data.upgrades.banner;
    $('#ck-premium').checked = !!data.upgrades.premium;
    $('#ck-pin').checked     = !!data.upgrades.pin;
    $('#ck-confidential') && ($('#ck-confidential').checked = !!data.upgrades.confidential);

    function saveFromUI() {
      data.plan = plan;
      data.base = plan === 'FSBO Plus' ? 100 : (plan === 'Listed Property Plus' ? 20 : 0);
      data.upgrades.upgradeToPlus = $('#ck-upgrade') ? $('#ck-upgrade').checked : data.upgrades.upgradeToPlus;
      data.upgrades.banner  = $('#ck-banner').checked;
      data.upgrades.premium = $('#ck-premium').checked;
      data.upgrades.pin     = $('#ck-pin').checked;
      data.upgrades.confidential = $('#ck-confidential') ? $('#ck-confidential').checked : data.upgrades.confidential;
      setJSON('checkoutData', data);
    }

    ['#ck-upgrade','#ck-banner','#ck-premium','#ck-pin','#ck-confidential'].forEach(sel=>{
      const el = $(sel);
      if (el) el.addEventListener('change', saveFromUI);
    });

    $('#goCheckout').addEventListener('click', () => {
      saveFromUI();
    });
  </script>
</body>
</html>
