<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upgrade Options | GuaranteedCommission.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800">

  <div class="max-w-xl mx-auto mt-10 bg-white p-6 rounded shadow text-center">
    <h1 class="text-2xl font-bold mb-6" id="upsellTitle">Loading...</h1>
    <p id="upsellDescription" class="text-sm text-gray-700 mb-6">Please wait...</p>

    <div class="flex justify-center gap-4">
      <button onclick="acceptUpsell()" class="bg-green-600 text-white px-6 py-2 rounded">Yes</button>
      <button onclick="skipUpsell()" class="bg-gray-400 text-white px-6 py-2 rounded">Skip</button>
    </div>

    <p class="text-sm text-center mt-6">
      Need to log in?  
      <a href="/login.html" class="text-blue-600 hover:underline">Go to login</a>
    </p>
  </div>

  <script>
    const selectedPlan = localStorage.getItem("selectedPlan") || "";
    const upsells = [];

    // Build upsell list based on plan
    if(selectedPlan === "Listed Property Basic"){
      upsells.push({
        id: "upgradeToPlus",
        title: "Upgrade to Listed Property Plus ($20)",
        desc: "Display full property description and 20 photos until your home is sold.",
        storageKey: "upgradeToPlus"
      });
    }

    if(selectedPlan === "Listed Property Plus" || selectedPlan === "Listed Property Basic"){
      upsells.push(
        {
          id: "banner",
          title: "Add Banner ($10)",
          desc: "Add a 30-character banner. Highlight special features, open houses, or whatever you like until your home is sold.",
          storageKey: "banner"
        },
        {
          id: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Your listing will appear ahead of non-premium listings in your search area until your home is sold.",
          storageKey: "premium"
        },
        {
          id: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Your listing will be pinned ahead of all listings in your search area until your home is sold. Includes Premium Placement for free.",
          storageKey: "pin"
        }
      );
    }

    if(selectedPlan === "FSBO Plus"){
      upsells.push(
        {
          id: "confidential",
          title: "Confidential FSBO Upgrade ($100)",
          desc: "Keep your contact information private and avoid solicitation.",
          storageKey: "confidential"
        },
        {
          id: "banner",
          title: "Add Banner ($10)",
          desc: "Add a 30-character banner. Highlight special features, open houses, or whatever you like until your home is sold.",
          storageKey: "banner"
        },
        {
          id: "premium",
          title: "Add Premium Placement ($10)",
          desc: "Your listing will appear ahead of non-premium listings in your search area until your home is sold.",
          storageKey: "premium"
        },
        {
          id: "pin",
          title: "Add Pin Placement ($50)",
          desc: "Your listing will be pinned ahead of all listings in your search area until your home is sold. Includes Premium Placement for free.",
          storageKey: "pin"
        }
      );
    }

    let currentIndex = 0;

    function showCurrentUpsell(){
      const upsell = upsells[currentIndex];
      if(!upsell){
        window.location.href = "/checkout.html";
        return;
      }
      document.getElementById("upsellTitle").textContent = upsell.title;
      document.getElementById("upsellDescription").textContent = upsell.desc;
    }

    function acceptUpsell(){
      const upsell = upsells[currentIndex];
      localStorage.setItem(upsell.storageKey, "true");
      if(upsell.id === "pin"){
        localStorage.setItem("premium", "true"); // pin includes premium
      }
      currentIndex++;
      showCurrentUpsell();
    }

    function skipUpsell(){
      currentIndex++;
      showCurrentUpsell();
    }

    window.addEventListener("DOMContentLoaded", showCurrentUpsell);
  </script>

</body>
</html>
